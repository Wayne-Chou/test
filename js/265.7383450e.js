"use strict";(self["webpackChunkshopping_test"]=self["webpackChunkshopping_test"]||[]).push([[265],{265:function(e,t,s){s.r(t),s.d(t,{default:function(){return D}});var o=s(3396),n=s(9242),r=s(7139);const a=e=>((0,o.dD)("data-v-6b8dd0b4"),e=e(),(0,o.Cn)(),e),l={class:"container"},i=a((()=>(0,o._)("label",{for:"name"},"姓名",-1))),h={key:0,class:"error-message"},c=a((()=>(0,o._)("br",null,null,-1))),d=a((()=>(0,o._)("label",{for:"phone"},"手機號碼",-1))),p={key:1,class:"error-message"},m=a((()=>(0,o._)("br",null,null,-1))),u=a((()=>(0,o._)("option",{value:""},"請選擇地區",-1))),g=["value"],v={key:2,class:"error-message"},w=["disabled"],S=a((()=>(0,o._)("option",{value:""},"請選擇門市",-1))),b=["value"],y={key:3,class:"error-message"};function A(e,t,s,a,A,k){return(0,o.wg)(),(0,o.iD)("div",l,[i,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>A.name=e),type:"text",name:"name",id:"name"},null,512),[[n.nr,A.name]]),A.errors.name?((0,o.wg)(),(0,o.iD)("div",h,(0,r.zw)(A.errors.name),1)):(0,o.kq)("",!0),c,d,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>A.phone=e),type:"text",name:"cellphone",id:"phone"},null,512),[[n.nr,A.phone]]),A.errors.phone?((0,o.wg)(),(0,o.iD)("div",p,(0,r.zw)(A.errors.phone),1)):(0,o.kq)("",!0),m,(0,o.wy)((0,o._)("select",{onChange:t[2]||(t[2]=(...e)=>k.changeArea&&k.changeArea(...e)),id:"area",name:"area",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>A.selectedArea=e)},[u,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(A.arealist,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.name,value:e},(0,r.zw)(e.name),9,g)))),128))],544),[[n.bM,A.selectedArea]]),A.errors.selectedArea?((0,o.wg)(),(0,o.iD)("div",v,(0,r.zw)(A.errors.selectedArea),1)):(0,o.kq)("",!0),(0,o.wy)((0,o._)("select",{id:"shop",name:"shop",required:"","onUpdate:modelValue":t[4]||(t[4]=e=>A.SevenShop=e),disabled:!A.selectedArea},[S,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(A.shoplist,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.townname,value:e},(0,r.zw)(e.townname),9,b)))),128))],8,w),[[n.bM,A.SevenShop]]),A.errors.SevenShop?((0,o.wg)(),(0,o.iD)("div",y,(0,r.zw)(A.errors.SevenShop),1)):(0,o.kq)("",!0),(0,o._)("input",{onClick:t[5]||(t[5]=(...e)=>k.submit&&k.submit(...e)),class:"sub",type:"submit"})])}s(560);var k={data(){return{arealist:[],shoplist:[],selectedArea:"",name:"",phone:"",SevenShop:"",errors:{}}},created(){this.$axios.get("https://api.nlsc.gov.tw/other/ListCounty").then((e=>{this.processXmlListInfo(e,"county")}))},computed:{},methods:{changeArea(){this.$axios.get("https://api.nlsc.gov.tw/other/ListTown1/"+this.selectedArea.code01).then((e=>{this.shoplist=e.data}))},processXmlListInfo(e,t){this.arealist=[];const s=e.data,o=new DOMParser,n=o.parseFromString(s,"text/xml"),r=n.getElementsByTagName(`${t}Item`);for(let a=0;a<r.length;a++){const e=r[a];console.log("item",e);const s=e.querySelector(`${t}code`).textContent;console.log("code",s);const o=e.querySelector(`${t}name`).textContent;console.log("name",o);const n=parseInt(e.querySelector(`${t}code01`).textContent);console.log("code01",n);const l={id:a+1,code:s,name:o,code01:n};this.arealist.push(l)}},submit(){if(this.errors={},""===this.name?this.errors.name="姓名不能為空":this.name.match(/^[A-Za-z\u4e00-\u9fa5]+$/)||(this.errors.name="姓名只能包含中英文字符"),""===this.phone?this.errors.phone="手機號碼不能為空":/^\d{10}$/.test(this.phone)||(this.errors.phone="手機號碼必須是10位數"),this.selectedArea||(this.errors.selectedArea="請選擇地區"),this.SevenShop||(this.errors.SevenShop="請選擇門市"),0===Object.keys(this.errors).length){let e={name:this.name,phone:this.phone,selectedAreaCode:this.selectedArea.code01,selectedAreaName:this.selectedArea.name,SevenShopCode:this.SevenShop.towncode01,SevenShopName:this.SevenShop.townname,status:!0};this.$axios.post("http://localhost:3000/sevenDatil/",e).then((()=>{this.$router.push({name:"OrderView"})}))}}}},_=s(89);const f=(0,_.Z)(k,[["render",A],["__scopeId","data-v-6b8dd0b4"]]);var D=f}}]);
//# sourceMappingURL=265.7383450e.js.map